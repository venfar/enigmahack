"""
База знаний для генерации ответов технической поддержки ООО «ЭРИС»
Версия: 2.0
Последнее обновление: 2026
"""

KNOWLEDGE_BASE = {
    # =========================================================================
    # ОБЩАЯ ИНФОРМАЦИЯ О КОМПАНИИ
    # =========================================================================
    "company": {
        "name": "ООО «ЭРИС»",
        "inn": "5920017357",
        "website": "https://eriskip.com",
        "products_url": "https://eriskip.com/ru/products",
        "files_library": "https://eriskip.com/ru/files-library",
        "support": {
            "phone": "8-800-55-00-715",  # бесплатный по РФ
            "email": "service@eriskip.ru",
            "sales_email": "info@eriskip.ru",
            "docs_email": "docs@eris.ru",
            "hours": "Пн-Пт, 06:00-18:00 МСК"
        },
        "address": {
            "production": "617762, Пермский край, г. Чайковский, ул. Промышленная, д. 8/25",
            "contact_person": "Брюханова Наталья Олеговна",
            "contact_phone": "+7 (34241) 6-55-11 доб. 101"
        }
    },
    
    # =========================================================================
    # КАТАЛОГ ПРОДУКЦИИ
    # =========================================================================
    "products": {
        # -------------------------------------------------------------------------
        # СТАЦИОНАРНЫЕ ГАЗОАНАЛИЗАТОРЫ ДГС СЕРИИ 200
        # -------------------------------------------------------------------------
        "dgs_210": {
            "name": "ДГС ЭРИС-210",
            "type": "стационарный газоанализатор",
            "modifications": [
                "IR — инфракрасный сенсор",
                "CT — термокаталитический сенсор", 
                "EC — электрохимический сенсор",
                "FR — инфракрасный на фреоны",
                "IR/CT (CH3COOH) — на уксусную кислоту"
            ],
            "interfaces": ["4-20 мА", "RS-485/Modbus RTU", "HART (опция)", "Bluetooth (опция)"],
            "power": "12-36 В DC (ном. 24 В)",
            "protection": "IP66/IP67, 1 Ex d [ia Ga] IIC T6 Gb X",
            "temperature": "-60...+65 °C (до +150 °C с выносным CT-сенсором)",
            "response_time_T90": {"IR": "5 с", "CT": "10 с", "EC": "45 с", "FR": "60 с"},
            "calibration_interval": {"IR": "3 года", "CT": "1 год", "EC": "1 год", "FR": "1 год"},
            "warranty": {"device_IR": "3 года", "device_CT_EC": "1 год", "sensor_IR": "12 мес", "sensor_CT": "12 мес", "sensor_EC": "12 мес (6 мес для CH3OH, HCl, NO)"},
            "mtbf_hours": {"IR_FR": 70000, "CT_EC": 35000},
            "service_life_years": 12,
            "detectable_gases": {
                "IR_CT": ["пары нефти и нефтепродуктов", "CH4", "C2H6", "C3H8", "C4H10", "CO2 (только IR)", "H2 (только CT)", "CH3COOH", "C2H4", "C6H6", "дизельное топливо", "бензин", "керосин"],
                "EC": ["H2S", "CO", "O2", "NH3", "NO", "NO2", "SO2", "Cl2", "HCN", "O3", "C2H4O"],
                "FR": ["R134", "R125", "R22", "R12", "R227"]
            }
        },
        
        "dgs_230": {
            "name": "ДГС ЭРИС-230",
            "type": "стационарный газоанализатор с OLED-дисплеем",
            "features": ["яркий дисплей", "настройка по месту", "магнитный ключ", "самодиагностика"],
            "modifications": ["IR", "CT", "EC", "FR", "IR/CT (CH3COOH)"],
            "interfaces": ["4-20 мА", "RS-485/Modbus RTU", "HART (опция)", "Bluetooth (опция)"],
            "power": "12-36 В DC (ном. 24 В)",
            "protection": "IP66/IP67, 1 Ex d [ia Ga] IIC T6 Gb X",
            "temperature": "-60...+65 °C (до +90 °C IR выносной, до +150 °C CT выносной)",
            "response_time_T90": {"IR": "5 с", "CT": "10 с", "EC": "45 с", "FR": "60 с"},
            "calibration_interval": {"IR": "3 года", "CT": "1 год", "EC": "1 год", "FR": "1 год"},
            "warranty": {"device_IR": "3 года", "device_CT_EC_FR": "1 год"},
            "mtbf_hours": {"IR_FR": 70000, "CT_EC": 35000},
            "service_life_years": 12,
            "detectable_gases": "аналогично ДГС-210"
        },
        
        "dgs_fid": {
            "name": "ДГС ЭРИС-ФИД / ФИД М",
            "type": "фотоионизационный стационарный газоанализатор",
            "features": ["чувствительность к 300+ ЛОС", "OLED-дисплей", "магнитный ключ"],
            "interfaces": ["4-20 мА", "RS-485/Modbus", "HART (опция)"],
            "power": "18-36 В DC (ном. 24 В)",
            "protection": "IP66/IP67, 1 Ex d [ia Ga] IIC T6 Gb X",
            "temperature": "-60...+65 °C",
            "calibration_interval": "1 год",
            "warranty": "1 год",
            "detectable_gases": ["винилхлорид", "бензол", "толуол", "ксилол", "стирол", "фенол", "этанол", "метанол", "пропанол", "бутанол", "арсин", "фосфин", "уксусная кислота", "акриловая кислота"]
        },
        
        "dgs_210_rf": {
            "name": "ДГС ЭРИС-210-RF",
            "type": "беспроводной стационарный газоанализатор",
            "features": ["LoRaWAN / E-WIRE", "автономное питание", "дальность до 1 км"],
            "power": "литиевая батарея (срок службы до 2 лет)",
            "protocols": ["LoRaWAN", "E-WIRE", "ModBus RTU*", "Bluetooth*"],
            "frequency": "868 МГц / 2.4 ГГц",
            "protection": "IP67, 1 Ex d [ia] IIC T6 X",
            "temperature": "-55...+65 °C",
            "calibration_interval": {"IR-RF": "3 года", "EC-RF": "1 год"},
            "warranty": "1 год",
            "detectable_gases": "аналогично ДГС-210 IR/EC"
        },
        
        # -------------------------------------------------------------------------
        # ПОРТАТИВНЫЕ ГАЗОАНАЛИЗАТОРЫ ПГ ЭРИС-400
        # -------------------------------------------------------------------------
        "pg_411": {
            "name": "ПГ ЭРИС-411",
            "type": "портативный одноканальный газоанализатор",
            "features": ["одна кнопка управления", "световая индикация 360°", "вибрация", "архив событий"],
            "sensors": ["электрохимические"],
            "power": "батарея до 2 лет",
            "protection": "IP66/IP67, IP66/IP68",
            "temperature": {"exec1": "-45...+50 °C", "exec2": "-40...+60 °C", "exec3": "-55...+65 °C"},
            "alarm": "светозвуковая + вибрация, 105 дБ",
            "calibration_interval": "6 месяцев",
            "verification_interval": "12 месяцев",
            "warranty": "24 месяца (сенсоры EC: 12 мес, кроме CH3OH/HCl/NO — 6 мес)",
            "service_life_years": 21,
            "detectable_gases": ["H2S", "CO", "O2", "NH3", "NO", "NO2", "SO2", "Cl2", "O3", "CO2", "HCN"]
        },
        
        "pg_414_1": {
            "name": "ПГ ЭРИС-414-1",
            "type": "портативный многоканальный газоанализатор (до 6 газов)",
            "features": ["OLED-дисплей", "Bluetooth", "LoRaWAN", "кнопка SOS", "360° индикация"],
            "sensors": ["IR", "CT", "EC", "PID (4R)"],
            "power": "до 20 ч (диффузионный), до 18 ч (с насосом)",
            "charging_time": "до 2 часов",
            "protection": "IP66/IP67, IP66/IP68",
            "temperature": {"exec1": "-45...+50 °C", "exec2": "-40...+60 °C", "exec3": "-55...+60 °C", "exec4": "-60...+65 °C"},
            "alarm": "световая 360°, звуковая 105 дБ, вибрация",
            "data_logger": "до 20 000 событий",
            "calibration_interval": "6 месяцев",
            "verification_interval": "12 месяцев",
            "warranty": "24 месяца (IR/CT: 12 мес, EC: 12 мес кроме CH3OH/HCl/NO — 6 мес, PID: 12 мес кроме 11.7 eV — 3 мес)",
            "service_life_years": 21,
            "detectable_gases": ["CH4", "C2H6", "C3H8", "CO2", "H2S", "CO", "O2", "NH3", "NO", "NO2", "пары нефтепродуктов", "ЛОС"]
        },
        
        "pg_414_2": {
            "name": "ПГ ЭРИС-414-2",
            "type": "портативный четырехканальный газоанализатор",
            "features": ["компактный (120×63×31 мм, 250 г)", "OLED-дисплей", "Bluetooth", "кнопка SOS"],
            "sensors": ["IR", "CT", "EC (4R)"],
            "power": "до 20 часов",
            "charging_time": "до 2 часов",
            "protection": "IP66/IP67, IP66/IP68",
            "temperature": "аналогично ПГ-414-1",
            "calibration_interval": "6 месяцев",
            "verification_interval": "12 месяцев",
            "warranty": "24 месяца",
            "service_life_years": 21,
            "detectable_gases": "аналогично ПГ-414-1 (без PID)"
        },
        
        # -------------------------------------------------------------------------
        # ГАЗОАНАЛИЗАТОРЫ ADVANT
        # -------------------------------------------------------------------------
        "advant": {
            "name": "Advant / Advant 2",
            "type": "стационарный одно/двухканальный газоанализатор с OLED-дисплеем",
            "features": ["морозоустойчивый дисплей", "два сенсора одновременно", "адаптивный обогрев"],
            "modifications": ["IR", "CT", "EC", "PID", "комбинации для Advant 2"],
            "interfaces": ["4-20 мА", "RS-485/Modbus RTU", "HART (опция)", "Bluetooth (опция)"],
            "power": "12-36 В DC (ном. 24 В)",
            "protection": "IP66/IP67, 1Ех db [ia Ga] IIC T6 Gb X / Ex tb [ia Da] IIIC T80°C Db X",
            "temperature": {"IR_CT_PID": "-60...+65 °C", "EC": "-40...+50 °C"},
            "calibration_interval": "1 год",
            "warranty": {"device": "36 месяцев", "sensor_IR": "36 месяцев", "sensor_CT_EC_PID": "12 месяцев"},
            "service_life_years": 15,
            "detectable_gases": {
                "IR_CT": ["пары нефтепродуктов", "CH4", "C2H6", "C3H8", "CO2", "CH3COOH", "ЛОС"],
                "EC": ["H2S", "CO", "O2", "NH3", "NO", "NO2", "SO2", "Cl2", "H2SO4", "NaOH", "HNO3"],
                "PID": ["бензол", "толуол", "ксилол", "стирол", "винилхлорид", "фенол", "этанол", "метанол"]
            }
        },
        
        # -------------------------------------------------------------------------
        # ERIS SIMPLE X
        # -------------------------------------------------------------------------
        "simple_x": {
            "name": "ERIS Simple X",
            "type": "стационарный одноканальный датчик-газоанализатор (двухпроводная схема)",
            "modifications": ["Simple X1", "X2", "X3", "X4"],
            "sensors": ["IR", "EC"],
            "interfaces": ["4-20 мА", "RS-485/Modbus RTU", "HART", "E-WIRE", "LoRa/LoRaWAN"],
            "power": "12-30 В DC",
            "protection": "IP66/IP67, IP66/IP68",
            "temperature": {"exec1": "-60...+65 °C", "exec2": "-60...+60 °C", "exec3": "-55...+60 °C", "exec4": "-40...+65 °C", "exec5": "-40...+60 °C"},
            "warmup_time": {"IR": "2 мин", "EC": "10 мин", "EC_NO_CH3OH_HCl": "300 мин"},
            "mtbf_hours": 110000,
            "service_life_years": 21,
            "detectable_gases": ["горючие газы", "O2", "CO2", "токсичные газы", "пары нефтепродуктов"]
        },
        
        # -------------------------------------------------------------------------
        # КОНТРОЛЛЕРЫ И СИСТЕМЫ
        # -------------------------------------------------------------------------
        "sgm_110": {
            "name": "СГМ ЭРИС-110",
            "type": "одноканальный контроллер (DIN-рейка / Крейт)",
            "channels": "1-256 (масштабируемая система)",
            "input_signals": ["4-20 мА (МВТ)", "мВ мостовая схема (МВП)"],
            "output_signals": ["4-20 мА", "RS-485/Modbus"],
            "relays": "3 реле (220 В, 8 А): Порог 1, Порог 2, Авария",
            "power": "18-36 В DC (ном. 24 В)",
            "temperature": "-10...+50 °C",
            "verification_interval": "1 год",
            "service_life_years": 10
        },
        
        "sgm_130": {
            "name": "СГМ ЭРИС-130",
            "type": "многоканальный контроллер",
            "channels": "1-40 одновременно",
            "input_types": ["МВТ: 4-20 мА (1-8 датчиков)", "RS-232/485 Modbus (1-32 датчика)"],
            "output_signals": ["RS-232/485 Modbus"],
            "relays": "4 реле (220 В, 8 А): Порог 1, 2, 3, Авария",
            "power": "18-36 В DC (ном. 24 В)",
            "display": "OLED-дисплей",
            "temperature": "-10...+50 °C",
            "verification_interval": "1 год",
            "service_life_years": 10
        },
        
        "lorabox": {
            "name": "LoraBOX",
            "type": "беспроводная точка доступа",
            "channels": "до 80 (с возможностью расширения)",
            "frequency": "864-870 МГц (RU864-870, EU863-870)",
            "range": "до 6 км (прямая видимость)",
            "power_output": "≤25 мВт",
            "protocol": "LoRaWAN",
            "encryption": "ABP/OTAA, 128-bit",
            "power_supply": "18-36 В DC, 2 А",
            "interfaces": {"indoor": ["RS485", "Ethernet", "USB", "7\" touchscreen"], "outdoor": ["RS485", "Ethernet", "Wi-Fi"]},
            "protection": {"indoor": "IP20", "outdoor": "IP66/IP67"},
            "temperature": {"indoor": "0...+50 °C", "outdoor": "-40...+50 °C"}
        },
        
        "bsk_400": {
            "name": "ЭРИС БСК серии 400",
            "type": "беспроводная система контроля загазованности",
            "components": [
                "ПГ ЭРИС-414/411 (портативные)",
                "ДГС ЭРИС-210-RF (беспроводные стационарные)",
                "ДГС ЭРИС-210 RT (ретранслятор)",
                "ДГС ЭРИС-210 MD (модем)",
                "ЭРИС S POINT (кнопка SOS)",
                "LoraBOX (точка доступа)"
            ],
            "features": ["масштабируемость", "дальность до 20 км", "интеграция с АСУ ТП", "отчеты в реальном времени"]
        },
        
        # -------------------------------------------------------------------------
        # СПЕЦИАЛИЗИРОВАННОЕ ОБОРУДОВАНИЕ
        # -------------------------------------------------------------------------
        "oxycircon": {
            "name": "ЭРИС Оксициркон",
            "type": "анализатор кислорода и CO для оптимизации горения",
            "measured_components": ["O2: 0-2/5/10/25/100 %", "CO: 0-500/1000/2000 ppm, 0-1/5 %"],
            "sensors": ["электрохимический ZrO2 для O2", "полупроводниковый для CO"],
            "interfaces": ["RS-485/Modbus RTU", "4-20 мА", "0-5 мА"],
            "power": "187-253 В AC, 49-51 Гц",
            "protection": "IP66/IP67, IP66/IP68",
            "temperature": {"exec1": "-60...+65 °C", "exec2": "-60...+75 °C"},
            "probe_temp_max": [450, 704, 1024, 1648],
            "response_time_T90": "10 с",
            "warmup_time": "30 мин",
            "mtbf_hours": 110000,
            "service_life_years": 21
        },
        
        "pou_500": {
            "name": "ПОУ-500",
            "type": "пробоотборное устройство (ручной насос)",
            "features": ["искробезопасный", "одна кнопка", "фильтрующий элемент"],
            "performance": "500±50 мл/мин",
            "protection": "IP55, 1Ex ib IIC T4 Gb X",
            "temperature": "-45...+55 °C",
            "probe_length": "до 20 м",
            "battery_life": "≥12 ч",
            "charging_time": "≤4 ч",
            "warranty": "12 месяцев",
            "service_life_years": 15
        },
        
        "eris_geyser": {
            "name": "ЭРИС-Гейзер",
            "type": "проверочное устройство для функциональной проверки газоанализаторов",
            "principle": "ультразвуковое распыление",
            "aerosols": ["серная кислота", "азотная кислота", "гидроксид натрия"],
            "concentration": "1-2 ПДК (настраивается при производстве)",
            "important": "НЕ является средством поверки, только для функциональной проверки",
            "kit": ["устройство", "силиконовая трубка", "калибровочная насадка", "зарядное устройство", "штатив", "РЭ", "паспорт"]
        },
        
        "dok_400": {
            "name": "Док ЭРИС-400",
            "type": "корректировочная станция для автоматического бамп-теста и калибровки",
            "functions": ["бамп-тест", "калибровка", "архивирование", "подключение к ПК"],
            "slots": "до 3 модулей для ПГ-411/414-2, до 2 для ПГ-414-1",
            "gas_inputs": 6,
            "gas_pressure": "0.1-0.2 МПа",
            "gas_flow": "1-1.5 л/мин",
            "power": "18-36 В DC, 1.5 Вт",
            "protection": "IP20/IP21/IP22",
            "temperature": "-10...+45 °C",
            "dimensions": "470×357×176 мм, ≤10 кг",
            "service_life_years": 10,
            "mtbf_hours": 10000
        },
        
        # -------------------------------------------------------------------------
        # СЕНСОРЫ И КОМПОНЕНТЫ
        # -------------------------------------------------------------------------
        "sensors": {
            "catalytic": {
                "name": "Термокаталитические сенсоры DCT",
                "features": ["устойчивость к H2S и HMDS", "T90 < 10 с", "повторяемость", "IP65"],
                "detectable": ["H2", "CH4", "C3H8", "C6H14", "пары нефтепродуктов"],
                "service_life_years": 5,
                "patent": "RU 201867 U1, RU 205698"
            },
            "sensing_elements": {
                "name": "Чувствительные элементы DCT SE",
                "features": ["запатентованный состав", "C1-9Hx", "5 лет работы*"],
                "note": "*при работе на чистом воздухе без неопределенных компонентов"
            }
        }
    },
    
    # =========================================================================
    # ДОКУМЕНТАЦИЯ И ФАЙЛЫ
    # =========================================================================
    "documentation": {
        "library_url": "https://eriskip.com/ru/files-library",
        "categories": [
            "Руководства по эксплуатации (РЭ)",
            "Паспорта изделий", 
            "Методики поверки (МП)",
            "Описания типа СИ",
            "Сертификаты соответствия (ТР ТС 012/2011, 020/2011)",
            "Декларации о соответствии",
            "Свидетельства об утверждении типа (РФ, РБ, РК, КР, UZ)",
            "СТО РМРС (морской регистр)",
            "3D-модели (STEP, ZIP)",
            "Конфигураторы ПО (Windows/Linux)",
            "DD-библиотеки HART",
            "Протоколы обмена RS-485",
            "Опросные листы",
            "Видеоинструкции (Rutube)"
        ],
        "software": {
            "dgs_configurator": "Конфигуратор ДГС для ДГС-210/230/ФИД",
            "pg414_configurator": "Конфигуратор ПГ ЭРИС-414 (Windows/Linux)",
            "pg411_configurator": "Конфигуратор ПГ ЭРИС-411",
            "advant_configurator": "Конфигуратор Advant 2",
            "simplex_configurator": "Конфигуратор SimpleX",
            "sgm110_configurator": "Конфигуратор СГМ-110",
            "sgm130_configurator": "Конфигуратор СГМ-130",
            "lorabox_configurator": "Конфигуратор LoraBOX",
            "oxycircon_configurator": "Конфигуратор Оксициркон",
            "dgs_ble_android": "ERIS DGS Конфигуратор для Android (Google Play)"
        }
    },
    
    # =========================================================================
    # КАЛИБРОВКА И ПОВЕРКА
    # =========================================================================
    "calibration": {
        "verification_intervals": {
            "dgs_210_230_IR": "3 года",
            "dgs_210_230_CT_EC_FR": "1 год",
            "dgs_fid": "1 год",
            "pg_411_414": "12 месяцев",
            "pg_411_414_calibration": "6 месяцев",
            "advant": "1 год",
            "simple_x": "указывается в описании типа",
            "sgm_110_130": "1 год",
            "oxycircon": "указывается в описании типа"
        },
        "calibration_methods": {
            "dgs_210_230": ["магнитный ключ", "RS-485", "HART", "мобильное приложение Bluetooth"],
            "pg_414": ["многофункциональная кнопка", "мобильное приложение", "Док ЭРИС-400"],
            "advant": ["магнитный ключ", "RS-485", "HART"]
        },
        "reference_gases": {
            "CH4": "метан для датчиков CH4 и суммарных углеводородов",
            "C3H8": "пропан для датчиков C3H8 и нефтепродуктов", 
            "CO": "угарный газ для датчиков CO",
            "O2": "кислород (нулевой газ + калибровочная смесь)",
            "H2S": "сероводород для датчиков H2S",
            "NH3": "аммиак для датчиков NH3"
        },
        "authorized_centers": [
            "Метрологическая служба ООО «ЭРИС» (аккредитована)",
            "Региональные центры ЦСМ",
            "Аккредитованные лаборатории Росаккредитации"
        ],
        "fgis_link": "https://fgis.gost.ru/fundmetrology/registry/4"
    },
    
    # =========================================================================
    # ПОДКЛЮЧЕНИЕ И ИНТЕРФЕЙСЫ
    # =========================================================================
    "connection": {
        "analog_outputs": {
            "4-20mA": {"type": "токовый", "load_max": "до 600 Ом", "description": "стандартный аналоговый выход"},
            "0-5mA": {"type": "токовый", "description": "для ЭРИС Оксициркон"}
        },
        "digital_interfaces": {
            "RS485": {
                "protocol": "Modbus RTU",
                "baud_rates": [9600, 19200, 38400, 57600, 115200],
                "default": {"baud": 9600, "parity": "None", "data_bits": 8, "stop_bits": 1},
                "max_length": "1200 м",
                "topology": "линия с termination 120 Ом на концах",
                "cable": "экранированная витая пара"
            },
            "HART": {
                "mode": "поверх 4-20 мА",
                "dd_files": "доступны в библиотеке файлов",
                "communicators": ["Emerson Trex", "Yokogawa", "ПО ЭРИС"]
            },
            "Bluetooth": {
                "purpose": "локальная настройка и диагностика",
                "app": "ERIS DGS Configurator для Android",
                "range": "до 10 м"
            },
            "LoRaWAN": {
                "frequency": "868 МГц (RU)",
                "range": "до 6 км (прямая видимость)",
                "encryption": "AES-128",
                "activation": "ABP / OTAA"
            }
        },
        "power_requirements": {
            "dgs_series": "12-36 В DC, потребляемая мощность 1-6.3 Вт в зависимости от режима",
            "pg_series": "встроенный аккумулятор, зарядка через USB",
            "sgm_series": "18-36 В DC",
            "advant": "12-36 В DC",
            "recommendations": [
                "Используйте стабилизированный источник питания",
                "Предусмотрите запас по току 20-30%",
                "Защитите линии от КЗ и переполюсовки",
                "Заземлите экраны кабелей в одной точке"
            ]
        },
        "wiring_tips": [
            "Экранированный кабель обязателен для RS-485",
            "Не прокладывать сигнальные кабели параллельно силовым",
            "Termination резисторы 120 Ом на концах линии RS-485",
            "Проверять полярность при подключении 4-20 мА",
            "Использовать кабельные вводы с соответствующим диаметром (макс. 11.7 мм для ДГС)"
        ]
    },
    
    # =========================================================================
    # МОНТАЖ И ЭКСПЛУАТАЦИЯ
    # =========================================================================
    "installation": {
        "dgs_mounting": {
            "locations": ["помещения", "открытые площадки", "зоны 1 и 2"],
            "mounting_options": ["на стену", "на трубу (комплект)", "на воздуховод (комплект)"],
            "remote_sensor": "возможна установка сенсора на удалении до 19 км от преобразователя",
            "accessories": ["козырек от осадков", "СЗО (светозвуковой оповещатель)", "кабельные вводы", "заглушки"]
        },
        "pg_usage": {
            "applications": ["рабочие зоны", "колодцы", "замкнутые пространства", "обходы"],
            "sampling": ["диффузионный", "принудительный с насосом (опция)", "ПОУ-500 для труднодоступных мест"],
            "wearing": ["клипса на одежду", "сумка", "штатив"]
        },
        "sensor_placement": {
            "reference": "ТУ-газ-86 «Требования к установке сигнализаторов и газоанализаторов»",
            "principles": [
                "Для газов тяжелее воздуха — установка в нижней зоне",
                "Для газов легче воздуха — установка в верхней зоне",
                "Учитывать направление вентиляции и возможные пути распространения",
                "Избегать «мертвых зон» и мест с застоем воздуха"
            ]
        }
    },
    
    # =========================================================================
    # ГАРАНТИЯ И СЕРВИС
    # =========================================================================
    "warranty_service": {
        "warranty_terms": {
            "standard": "указывается в руководстве по эксплуатации на конкретный прибор",
            "dgs_210_230_IR": "3 года на прибор, 12 мес на сенсор IR",
            "dgs_210_230_CT_EC": "1 год на прибор и сенсор",
            "pg_411_414": "24 месяца на прибор, 12 мес на сенсоры (исключения: CH3OH/HCl/NO — 6 мес, PID 11.7eV — 3 мес)",
            "advant": "36 месяцев на прибор, 36 мес на IR-сенсор, 12 мес на CT/EC/PID",
            "start_date": "с даты отгрузки потребителю или 6 месяцев от даты приемки"
        },
        "repair_process": {
            "warranty": {
                "step1": "Консультация с техподдержкой: service@eriskip.ru или 8-800-55-00-715",
                "step2": "Заполнение рекламационного акта: https://eriskip.com/uploads/files/ru/1/329/reklamacionnyj-akt.docx",
                "step3": "Отправка прибора с актом на адрес производства"
            },
            "post_warranty": {
                "step1": "Сопроводительное письмо с описанием неисправности",
                "step2": "Указать наименование организации и контакты ответственных",
                "step3": "Отправка на адрес производства"
            },
            "shipping_requirements": {
                "recipient_type": "ОБЯЗАТЕЛЬНО организация (НЕ частное лицо)",
                "recipient": 'ООО "ЭРИС", ИНН 5920017357',
                "address": "617762, Пермский край, г. Чайковский, ул. Промышленная, д. 8/25",
                "contact": "Брюханова Наталья Олеговна, +7 (34241) 6-55-11 доб. 101"
            }
        },
        "important_warnings": {
            "component_compatibility": "Взаимозаменяемость сенсоров и электронных модулей ограничена для приборов новых выпусков",
            "prohibited_actions": [
                "Подключать электронный модуль от другого прибора (номера должны совпадать)",
                "Подключать сенсор от другого прибора",
                "Подключать СЗО от другого прибора"
            ],
            "zip_ordering": "При заказе ЗИП обязательно указывать заводской номер прибора"
        }
    },
    
    # =========================================================================
    # УСТРАНЕНИЕ НЕИСПРАВНОСТЕЙ (FAQ)
    # =========================================================================
    "troubleshooting": {
        "common_issues": [
            {
                "problem": "Ложные срабатывания / нестабильные показания",
                "possible_causes": ["конденсат в сенсоре", "загрязнение оптики (IR)", "отравление катализатора (CT)", "помехи по питанию", "неверная калибровка"],
                "solutions": [
                    "Проверить условия эксплуатации (температура, влажность)",
                    "Выполнить калибровку нуля в чистом воздухе",
                    "Проверить фильтры и при необходимости заменить",
                    "Для IR: проверить загрязнение оптики, выполнить автокалибровку",
                    "Для CT: проверить наличие каталитических ядов (силиконы, сера)"
                ]
            },
            {
                "problem": "Нет связи по RS-485",
                "possible_causes": ["неверные настройки Modbus", "обрыв/КЗ линии", "отсутствие termination", "конфликт адресов"],
                "solutions": [
                    "Проверить настройки: 9600/None/8/1, адрес устройства",
                    "Проверить целостность кабеля и полярность A/B",
                    "Установить termination резисторы 120 Ом на концах линии",
                    "Проверить уникальность адресов Modbus",
                    "Использовать конфигуратор для диагностики"
                ]
            },
            {
                "problem": "Прибор не включается / нет индикации",
                "possible_causes": ["отсутствие питания", "неверная полярность", "неисправность БП"],
                "solutions": [
                    "Проверить напряжение на клеммах питания (12-36 В DC)",
                    "Проверить полярность подключения",
                    "Проверить предохранитель (если есть)",
                    "Попробовать другой источник питания"
                ]
            },
            {
                "problem": "Превышение времени отклика",
                "possible_causes": ["засорение фильтра", "низкий расход пробы", "неисправность сенсора"],
                "solutions": [
                    "Заменить фильтрующий элемент",
                    "Проверить линию пробоотбора на перегибы",
                    "Проверить работу насоса (если есть)",
                    "Выполнить диагностику через конфигуратор"
                ]
            },
            {
                "problem": "Разряд батареи портативного прибора",
                "possible_causes": ["естественный износ", "частое использование насоса", "низкая температура"],
                "solutions": [
                    "Зарядить прибор штатным ЗУ (до 2-4 часов)",
                    "Снизить использование насоса при возможности",
                    "Хранить прибор при комнатной температуре",
                    "При быстром разряде — обратиться в сервис"
                ]
            }
        ],
        "diagnostic_tools": {
            "configurators": "Использовать ПО-конфигуратор для чтения статусов, журналов ошибок, параметров",
            "self_test": "Большинство приборов выполняют автотест при включении",
            "led_indication": "Светодиоды отображают статус: питание, тревога, неисправность, связь",
            "display_messages": "OLED-дисплеи показывают коды ошибок и подсказки"
        }
    },
    
    # =========================================================================
    # МОБИЛЬНОЕ ПРИЛОЖЕНИЕ DGS BLE
    # =========================================================================
    "dgs_ble_app": {
        "name": "ERIS DGS Configurator для Android",
        "download": "Google Play: com.eriskip.dgsandroidcfg",
        "functions": ["настройка параметров", "калибровка нуля и чувствительности", "чтение архива", "диагностика"],
        "connection": "Bluetooth, требуется сопряжение с прибором",
        "access_request": {
            "required_data": ["ФИО сотрудника", "Должность", "Наименование предприятия", "Контактный телефон", "ID/серийный номер устройства"],
            "processing_time": "1 рабочий день",
            "contact": "service@eriskip.ru"
        }
    },
    
    # =========================================================================
    # ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ (FAQ)
    # =========================================================================
    "faq": {
        "docs": {
            "question": "Где взять разрешительную документацию на продукцию?",
            "answer": "Вся техническая и разрешительная документация доступна в библиотеке файлов: https://eriskip.com/ru/files-library"
        },
        "warranty_period": {
            "question": "Какой срок гарантии на оборудование?",
            "answer": "Гарантийный срок указан в РЭ на конкретный прибор и составляет до 3 лет. Подробности на https://eriskip.com/ru/products"
        },
        "repair_shipping": {
            "question": "Куда отправлять оборудование для ремонта?",
            "answer": "На адрес: 617762, Пермский край, г. Чайковский, ул. Промышленная, д. 8/25. Получатель: ООО «ЭРИС» (ИНН 5920017357). Обязательно сопроводительное письмо с описанием неисправности и контактами."
        },
        "price_list": {
            "question": "Где взять прайс-лист?",
            "answer": "Обратитесь в отдел продаж: info@eriskip.ru. С вами свяжется персональный менеджер."
        },
        "dgs_210_calibration": {
            "question": "Как настроить ДГС ЭРИС-210 мод.1?",
            "answer": "Установка нуля и калибровка чувствительности: магнитом, по RS-485 или по HART. Подробно в Разделе 16 РЭ: https://eriskip.com/uploads/files/ru/14/265/rukovodstvo-po-ekspluatacii-dgs-eris-210-v8-3.pdf"
        },
        "verification_interval": {
            "question": "Какой интервал между поверками?",
            "answer": "Сведения в описаниях типа СИ в ФГИС «Аршин»: https://fgis.gost.ru/fundmetrology/registry/4"
        },
        "dgs_delivery_kit": {
            "question": "Что входит в комплект ДГС? Есть кабельные вводы?",
            "answer": "Комплект оговаривается в договоре. Стандартно: кабельный ввод, заглушка, магнитный ключ, шестигранник, паспорт."
        },
        "sensor_coverage": {
            "question": "Как рассчитать количество датчиков на площадь?",
            "answer": "Требования к установке описаны в документе ТУ-газ-86 «Требования к установке сигнализаторов и газоанализаторов»."
        },
        "cable_gland_diameter": {
            "question": "Максимальный диаметр кабеля для ввода ДГС ЭРИС-210?",
            "answer": "Стандартный ввод А3RCCBF/20S-2/M20: макс. диаметр оболочки кабеля 11.7 мм."
        },
        "dd_files": {
            "question": "Где скачать DD-файлы для ДГС ЭРИС-210/230?",
            "answer": "В библиотеке файлов, раздел «Программное обеспечение»: https://eriskip.com/ru/files-library?category=2"
        }
    }
}

# =========================================================================
# ПРОМПТ ДЛЯ ГЕНЕРАЦИИ ОТВЕТОВ
# =========================================================================
GENERATION_PROMPT = """Ты — специалист техподдержки ООО «ЭРИС».
Твоя задача — дать ТОЧНЫЙ ответ ТОЛЬКО на основе предоставленного контекста.

⚠️ КРИТИЧЕСКИЕ ПРАВИЛА:
1. НЕ придумывай телефоны, email, адреса — используй ТОЛЬКО из контекста
2. НЕ включай инструкции/правила в ответ клиенту
3. Если информации в контексте нет — напиши: "Для уточнения обратитесь в поддержку"
4. НЕ повторяй один и тот же ответ несколько раз
5. Ответ должен быть ОДИН, краткий, по делу

✅ Формат ответа:
- Обращение по имени (если есть)
- Краткий ответ на вопрос (1-3 предложения)
- Конкретные данные из контекста (интервалы, модели, ссылки)
- Контакты поддержки из контекста (ОДИН раз в конце)

Контекст из базы знаний:
{context}

Данные клиента:
• Имя: {fio}
• Прибор: {device_type}
• Вопрос: {description}

Составь ОДИН ответ на русском языке, БЕЗ повторений и выдуманных данных:"""